{% extends 'base.html' %}
{% load bootstrap3 %}
{% load bootstrap_ui_tags %}

{% block title %}Submit metric{% endblock %}

{% block content %}

    <!-- bodywrap -->
    <div id="bodywrap">
        {% container %}
            {% if success %}
                {% row %}
                    {% column xs="12" sm="7" %}
                        <div class="alert alert-success" role="alert">
                            Metric successfully submitted; <a href='/metric/'>submit another</a>.
                        </div>
                    {% endcolumn %}
                {% endrow %}
            {% elif error %}
                {% row %}
                    {% column xs="12" sm="4" %}
                        <div class="alert alert-danger" role="alert">
                            An error occurred, please try again.
                        </div>
                    {% endcolumn %}
                {% endrow %}
            {% else %}
                {% row %}
                    {% column xs="12" sm="3" %}
                        {% if activity_form %}
                            <form method="get">
                                {% csrf_token %}
                                {% bootstrap_form activity_form %}
                            </form>
                        {% endif %}
                    {% endcolumn %}
                {% endrow %}
                {% row %}
                    {% column %}
                        {% if metric_form %}
                            <hr>
                            <form method="post">
                                {% csrf_token %}
                                {% bootstrap_form metric_form %}
                                <button type="submit" class="btn btn-info pull-right">Submit</button>
                            </form>
                        {% endif %}
                    {% endcolumn %}
                {% endrow %}
            {% endif %}
        {% endcontainer %}
    </div>
    <!-- end bodywrap -->

    <script>

        jQuery('#id_activity').change(function(){
            // on change even handler to set the proper
            // GET variables that load the proper form
            window.location = '?activity=' + jQuery(this).val();
        })

        jQuery(function () {
            jQuery("#id_start").datetimepicker({
                format: "YYYY-MM-DD H:mm:ss"
            });
            jQuery("#id_end").datetimepicker({
                format: "YYYY-MM-DD H:mm:ss"
            });
        });


    </script>


{% endblock %}
